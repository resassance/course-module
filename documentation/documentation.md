# Документация модуля "Курсы" для Системы управления электронного обучения

## Описание модуля

Модуль "Курсы" предназначен для управления онлайн-курсами в системе электронного обучения. В системе участвуют пользователи с разными ролями:

- **Преподаватель (teacher)** — создаёт и ведёт курсы, управляет заявками вольнослушателей.
- **Студент (student)** — записывается на курсы и обучается.
- **Вольнослушатель (auditor)** — может отправлять заявки на доступ к курсам.
- **Администратор (staff)** — имеет расширенные права, может управлять курсами и заявками.

Каждый курс связан с учебной группой и учебным годом, имеет преподавателя, набор материалов и участников (студентов и вольнослушателей).

---

## Модели

### User

Пользователь системы с ролью (`teacher`, `student`, `auditor`). Расширяет стандартную модель `AbstractUser`.

### Group

Учебная группа, объединяющая студентов.

### Year

Учебный год с началом и концом.

### Course

Основная модель курса:
- Заголовок, описание, дата создания, активность.
- Связь с учебным годом, преподавателем и группой.

### CourseRequest

Заявка вольнослушателя на доступ к курсу с полями:
- Курс
- Вольнослушатель
- Статус

### CourseEnrollment

Запись студента на курс с датой записи.

### CourseMaterial

Материалы курса с типом, содержимым и возможным файлом.

### CourseModule

Модули внутри курса с порядковым номером.

### CourseArchive

Архивные данные курса с состоянием (архивирован или удалён).

### CourseSettings

Настройки видимости курса (публичный, приватный, скрытый).

---

## Права доступа и роли

| Роль         | Доступ к просмотру курсов | Создание заявок | Управление заявками | Запись на курсы | Управление материалами |
|--------------|---------------------------|-----------------|--------------------|-----------------|------------------------|
| **teacher**  | Да                        | Нет             | Да                 | Нет             | Да                     |
| **student**  | Да                        | Нет             | Нет                | Да              | Нет                    |
| **auditor**  | Да                        | Да              | Нет                | Нет             | Нет                    |
| **admin**    | Да                        | Да              | Да                 | Да              | Да                     |

---

## Описание Views

### `course_list_view`

- **URL:** `/api/1/courses/`
- **Метод:** GET
- **Описание:** Возвращает список всех курсов.
- **Доступ:** Общедоступен.
- **Ответ:** Список курсов.

---

### `last_courses`

- **URL:** `/api/1/courses/last/`
- **Метод:** GET
- **Описание:** Возвращает последние 3 созданных курса.
- **Доступ:** Общедоступен.

---

### `course_detail`

- **URL:** `/api/1/courses/<pk>/`
- **Метод:** GET
- **Описание:** Детальная информация по курсу.
- **Доступ:** Общедоступен.

---

### `course_materials`

- **URL:** `/api/1/courses/<pk>/materials/`
- **Метод:** GET
- **Описание:** Материалы курса.
- **Доступ:** Только аутентифицированные пользователи.

---

### `course_enrollments`

- **URL:** `/api/1/courses/<pk>/enrollments/`
- **Методы:** GET, POST
- **Описание:** 
  - GET: Получение списка записей на курс. Преподаватель и админ видят всех, студенты — только свои записи.
  - POST: Запись на курс (по умолчанию для текущего пользователя).
- **Доступ:** Только аутентифицированные пользователи.

---

### `course_requests`

- **URL:** `/api/1/courses/<pk>/requests/`
- **Методы:** GET, POST
- **Описание:** 
  - GET: Получение заявок на курс. Преподаватель и админ видят все заявки, вольнослушатель — только свои.
  - POST: Вольнослушатель отправляет заявку на курс.
- **Доступ:** Только аутентифицированные пользователи.

---

### `handle_request`

- **URL:** `/api/1/courses/requests/<pk>/`
- **Метод:** PATCH
- **Описание:** Преподаватель или админ меняет статус заявки (одобрено/отклонено). При одобрении создаётся запись студента.
- **Доступ:** Только преподаватель или админ.

---

## serializers.py

- **CourseSerializer:** Полная сериализация курса.
- **CourseLastSerializer:** Минимальная информация для последних курсов.
- **CourseMaterialSerializer:** Сериализация материалов курса.
- **CourseEnrollmentSerializer:** Запись на курс с именем студента.
- **CourseRequestSerializer:** Заявка с именем вольнослушателя.

---

## urls.py

Все маршруты связаны с соответствующими view-функциями для управления курсами, материалами, записями и заявками.

---